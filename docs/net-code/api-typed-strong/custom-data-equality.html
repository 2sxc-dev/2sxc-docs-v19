<!DOCTYPE html>
<html>
  <!-- 2sxc docs -->
  <head>
    <meta charset="utf-8">
      <title>Data Equality on Custom Data Models in 2sxc 17+ | 2sxc 19 for Dnn and Oqtane </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Data Equality on Custom Data Models in 2sxc 17+ | 2sxc 19 for Dnn and Oqtane ">
      
      <link rel="icon" href="../../assets/favicon.ico">
      <link rel="stylesheet" href="../../public/docfx.min.css">
      <link rel="stylesheet" href="../../public/main.css">
      <meta name="docfx:navrel" content="../../toc.html">
      <meta name="docfx:tocrel" content="../toc.html">
      
      <meta name="docfx:rel" content="../../">
      
      
      
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">      
  </head>

  <script type="module" src="./../../public/docfx.min.js"></script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>

  <script async src="https://www.googletagmanager.com/gtag/js?id=GTM-PH2TVNW"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'GTM-PH2TVNW');
  </script>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../index.html">
            <img id="logo" class="svg" src="../../assets/logos/vcurrent/50.png" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">



              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">

                <a class="btn btn-sm border-0 text-nowrap version-button" xstyle="padding: 10px 0 0 0; width: 25px" href="https://go.2sxc.org/docs-versions" target="_blank">
                  &nbsp; v18 <i class="bi bi-caret-down-fill fs-6"></i>
                </a>
              </form>


            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="NetCode.StrongTypedCode.DataEquality">
<h1 id="data-equality-on-custom-data-models-in-2sxc-17">Data Equality on Custom Data Models in 2sxc 17+</h1>

<p>Custom data models such as <code>AppCode.Data.Product</code> or <code>AppCode.Data.BlogPost</code> are technically a wrapper around
other objects usually coming from <code>IEntity</code>s.</p>
<p>As such, there is always the question how to check equality.</p>
<div class="TIP">
<h5>Tip</h5>
<p>The key take away: <strong>use the <code>==</code> operator</strong> and <strong>use the <code>.Equals()</code> method</strong> and <strong>use <code>.GroupBy()</code></strong> as you would expect.</p>
<p>We have done special modifications to the wrappers, so the <code>==</code> operator and <code>item.Equals(item2)</code> will work as expected.</p>
</div>
<p>Let's explain:</p>
<pre><code class="lang-c#">var item1 = As&lt;Product&gt;(MyItem);
var item2 = As&lt;Product&gt;(MyItem);

var isEqual = item1 == item2; // should this be true or false?
</code></pre>
<p>Technically the wrappers are different objects, as they were created independently.
So in terms of what really happens, they are different,
but for practical purposes they should behave as if they are the same.
Here's why:</p>
<pre><code class="lang-c#">// Get a list of all blog posts, then group by category
var blogPosts = AsList&lt;BlogPost&gt;(MyItems);
var grouped = blogPosts.GroupBy(p =&gt; p.Category);
</code></pre>
<p>Internally every item was wrapped as a <code>BlogPost</code>.
Each one will also get the <code>Category</code> which was also wrapped independently.
But for grouping by something, the should be considered equal.</p>
<h2 id="equality-implementation">Equality Implementation</h2>
<ol>
<li>we have overloaded the <code>==</code> and <code>!=</code> operators to compare the underlying <code>IEntity</code> objects.</li>
<li>we have implemented the <code>.Equals()</code> method to compare the underlying <code>IEntity</code> objects.</li>
</ol>
<p>This means that you can use the <code>==</code> operator and the <code>.Equals()</code> method as you would expect.
It also means that LINQ operations such as <code>GroupBy</code> will work as expected.</p>
<h2 id="difference-to-itypeditem">Difference to ITypedItem</h2>
<div class="IMPORTANT">
<h5>Important</h5>
<p>This is a different than the implementation on <code>ITypedItem</code>.
There we could only override <code>.Equals()</code>, so that and <code>GroupBy</code> would work as expected,
but the <code>==</code> operator would not work as expected in <code>ITypedItem</code>.</p>
</div>
<h2 id="edge-cases">Edge Cases</h2>
<p>If rare cases where you extend the Data Model eg. <code>BlogPost</code> with additional properties, such as this</p>
<pre><code class="lang-c#">namespace AppCode.Data
{
  public partial class BlogPost
  {
    public string CustomProperty { get; set; }
  }
}
</code></pre>
<p>...you may have two different objects, because you set that property on one and not the other.
In this case, you may still want to check for equality and expect it to be <code>false</code>,
but the underlying check would compare the inner data and return <code>true</code>.</p>
<p>We believe this is a very, very rare scenario.
If you want to do this, and expect two wrappers around the same data to be un-equal,
you'll need to use <a href="https://learn.microsoft.com/en-us/dotnet/api/system.object.referenceequals">ReferenceEquals</a>.</p>
<hr>
<h2 id="history">History</h2>
<ul>
<li><code>.Equals</code> implemented in v17.03</li>
<li><code>==</code> and <code>!=</code> operators implemented in v17.04</li>
</ul>

</article>

        <div class="contribution d-print-none">
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          
          <span>
            Made by <a href="https://www.2sic.com">2sic</a>
            with ðŸ’– and
            <a href="https://dotnet.github.io/docfx">docfx</a>
            â€” 
            for <a href="https://2sxc.org">2sxc</a>,
            <a href="https://dnncommunity.org/">Dnn</a> 
            and <a href="https://www.oqtane.org/">Oqtane</a>
            â€” 
            see also <a href="">2sxc Github</a> and <a href="https://blazor-cms.org">Blazor CMS</a>
          </span>
        </div>
      </div>
    </footer>
  </body>
</html>