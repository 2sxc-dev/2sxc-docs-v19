<!DOCTYPE html>
<html>
  <!-- 2sxc docs -->
  <head>
    <meta charset="utf-8">
      <title>Strictly Typed Data Models Guide (new v17.02) | 2sxc 19 for Dnn and Oqtane </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Strictly Typed Data Models Guide (new v17.02) | 2sxc 19 for Dnn and Oqtane ">
      
      <link rel="icon" href="../../../assets/favicon.ico">
      <link rel="stylesheet" href="../../../public/docfx.min.css">
      <link rel="stylesheet" href="../../../public/main.css">
      <meta name="docfx:navrel" content="../../../toc.html">
      <meta name="docfx:tocrel" content="../../toc.html">
      
      <meta name="docfx:rel" content="../../../">
      
      
      
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">      
  </head>

  <script type="module" src="./../../../public/docfx.min.js"></script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>

  <script async src="https://www.googletagmanager.com/gtag/js?id=GTM-PH2TVNW"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'GTM-PH2TVNW');
  </script>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../../index.html">
            <img id="logo" class="svg" src="../../../assets/logos/vcurrent/50.png" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">



              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">

                <a class="btn btn-sm border-0 text-nowrap version-button" href="https://go.2sxc.org/docs-versions" target="_blank" title="archive ðŸ”’">
                  v19 ðŸ”’ <i class="bi bi-caret-down-fill fs-6"></i>
                </a>
              </form>

              <ul class="navbar-nav">
                <li class="nav-item nav-link" style="color: red; font-weight: bold;">
                  ðŸ”’ ARCHIVE
                </li>
              </ul>

            
          </div>
        </div>
      </div></nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="NetCode.Data.Typed.Models">

<div class="float-end context-box-summary highlight-max" width="400px">
  <div class="fancybox-auto svg-highlight" style="width: 100%">
<svg version="1.1" baseprofile="full" viewbox="0 0 3229 2529" xmlns="http://www.w3.org/2000/svg">
  <image href="../../../pages/basics/stack/assets/stack-detailed.png" x="0" y="0" height="100%" width="100%"></image>
  <!-- Data Highlights -->
  <rect class="svg-highlight prepared data-all" x="0%" y="82%" width="84%" height="18%"></rect>
  <rect class="svg-highlight prepared data-data" x="19%" y="82%" width="64%" height="18%"></rect>
  <rect class="svg-highlight prepared data-assets-all" x="3%" y="82%" width="33%" height="18%"></rect>
  <rect class="svg-highlight prepared data-assets-app" x="3%" y="82%" width="17%" height="10%"></rect>
  <rect class="svg-highlight prepared data-assets-entities" x="18.5%" y="82%" width="17%" height="10%"></rect>
  <rect class="svg-highlight prepared data-configuration" x="3%" y="93%" width="17%" height="6.5%"></rect>
  <rect class="svg-highlight prepared data-entities" x="34%" y="82%" width="33%" height="10.5%"></rect>
  <rect class="svg-highlight prepared data-content-types" x="34%" y="89%" width="33%" height="10%"></rect>
  <rect class="svg-highlight prepared data-content-types-app" x="34%" y="89%" width="17.5%" height="10%"></rect>
  <rect class="svg-highlight prepared data-content-types-global" x="50%" y="89%" width="17%" height="10%"></rect>
  <rect class="svg-highlight prepared data-external" x="65.5%" y="82%" width="17%" height="10.5%"></rect>
  <!-- ADAM -->
  <rect class="svg-highlight prepared adam" x="18.5%" y="89%" width="17%" height="8%"></rect>
  <!-- Server -->
  <rect class="svg-highlight prepared server-all" x="0%" y="41%" width="84%" height="38%"></rect>
  <!-- Prepare -->
  <rect class="svg-highlight prepared prepare-all" x="0%" y="61%" width="84%" height="18%"></rect>
  <rect class="svg-highlight prepared query" x="44.5%" y="61%" width="34%" height="18%"></rect>
  <rect class="svg-highlight prepared query-engine" x="44.5%" y="70%" width="34%" height="7%"></rect>
  <rect class="svg-highlight prepared query-built-in" x="44.5%" y="62.5%" width="18%" height="11%"></rect>
  <rect class="svg-highlight prepared query-app" x="60.5%" y="62.5%" width="17%" height="11%"></rect>
  <rect class="svg-highlight prepared query-datasource" x="71%" y="70%" width="7%" height="7%"></rect>
  <rect class="svg-highlight prepared query-params" x="65%" y="70%" width="10%" height="7%"></rect>
  <!-- Data Source -->
  <rect class="svg-highlight prepared datasource" x="86%" y="51%" width="13%" height="16%"></rect>
  <rect class="svg-highlight prepared datasource-custom" x="87.5%" y="54.5%" width="12%" height="6%"></rect>
  <rect class="svg-highlight prepared datasource-built-in" x="87.5%" y="59%" width="12%" height="7%"></rect>
  <rect class="svg-highlight prepared lookup" x="86%" y="66%" width="13%" height="15%"></rect>
  <rect class="svg-highlight prepared lookup-engine" x="87.5%" y="69%" width="12%" height="6%"></rect>
  <rect class="svg-highlight prepared lookup-sources" x="87.5%" y="73%" width="12%" height="7%"></rect>
  <!-- Optimzers -->
  <rect class="svg-highlight prepared asset-optimizer" x="3%" y="49.5%" width="13.5%" height="8%"></rect>
  <rect class="svg-highlight prepared image-resizer" x="15%" y="30%" width="17%" height="34%"></rect>
  <!-- Process / Awesomize -->
  <rect class="svg-highlight prepared process-all" x="0%" y="41%" width="84%" height="18%"></rect>
  <rect class="svg-highlight prepared process-cs" x="34%" y="41%" width="33%" height="18%"></rect>
  <rect class="svg-highlight prepared process-razor" x="34.3%" y="42%" width="17%" height="15%"></rect>
  <rect class="svg-highlight prepared process-razor-app" x="34.3%" y="42%" width="17%" height="10%"></rect>
  <rect class="svg-highlight prepared process-razor-engine" x="34.3%" y="50%" width="17%" height="7%"></rect>
  <rect class="svg-highlight prepared process-apis" x="50%" y="42%" width="34%" height="15%"></rect>
  <rect class="svg-highlight prepared process-web-api" x="50%" y="42%" width="17%" height="15%"></rect>
  <rect class="svg-highlight prepared process-web-api-app" x="50%" y="42%" width="17%" height="10%"></rect>
  <rect class="svg-highlight prepared process-web-api-engine" x="50%" y="50%" width="17%" height="7%"></rect>
  <rect class="svg-highlight prepared process-libraries" x="47%" y="47%" width="7%" height="7%"></rect>
  <rect class="svg-highlight prepared process-headless" x="65.5%" y="49.5%" width="17%" height="7%"></rect>
  <!-- Libraries -->
  <rect class="svg-highlight prepared libraries" x="86%" y="38%" width="13%" height="15%"></rect>
  <rect class="svg-highlight prepared libraries-app" x="87.5%" y="41%" width="12%" height="6.5%"></rect>
  <rect class="svg-highlight prepared libraries-built-in" x="87.5%" y="46%" width="12%" height="6%"></rect>
  <!-- data formats -->
  <rect class="svg-highlight prepared format-json-custom" x="50%" y="32%" width="17%" height="14%"></rect>
  <rect class="svg-highlight prepared format-json-headless" x="65.5%" y="32%" width="17%" height="21%"></rect>
  <rect class="svg-highlight prepared format-json-edit" x="74%" y="30%" width="19%" height="23%"></rect>
  <!-- Browser -->
  <rect class="svg-highlight prepared browser-all" x="0%" y="0%" width="100%" height="34%"></rect>
  <rect class="svg-highlight prepared browser-show" x="0%" y="0%" width="50%" height="34%"></rect>
  <rect class="svg-highlight prepared browser-interact-edit" x="47%" y="0%" width="37%" height="34%"></rect>
  <rect class="svg-highlight prepared browser-interact" x="47%" y="0%" width="20.5%" height="34%"></rect>
  <rect class="svg-highlight prepared browser-edit" x="64%" y="0%" width="20.5%" height="34%"></rect>
  <rect class="svg-highlight prepared browser-edit-ui" x="81.5%" y="0%" width="18%" height="34%"></rect>
  <!-- Frameworks -->
  <rect class="svg-highlight prepared frameworks-browser" x="0%" y="0%" width="17.5%" height="34%"></rect>
  <rect class="svg-highlight prepared frameworks-CSS" x="0%" y="3%" width="17.5%" height="12%"></rect>
  <rect class="svg-highlight prepared frameworks-js" x="0%" y="12%" width="17.5%" height="12%"></rect>
  <rect class="svg-highlight prepared frameworks-spa" x="0%" y="21%" width="17.5%" height="12%"></rect>
  <!-- App show parts -->
  <rect class="svg-highlight prepared show-html" x="15.8%" y="3%" width="17.5%" height="12%"></rect>
  <rect class="svg-highlight prepared show-js" x="15.8%" y="12%" width="17.5%" height="12%"></rect>
  <rect class="svg-highlight prepared show-spa" x="15.8%" y="21%" width="17.5%" height="12%"></rect>
  <!-- Interact parts -->
  <rect class="svg-highlight prepared interact-mobile" x="48.5%" y="3%" width="17.5%" height="12%"></rect>
  <rect class="svg-highlight prepared interact-2sxc" x="48.5%" y="12%" width="17.5%" height="12%"></rect>
  <!-- Edit parts -->
  <rect class="svg-highlight prepared edit-auto" x="65.5%" y="3%" width="17.5%" height="12%"></rect>
  <rect class="svg-highlight prepared edit-custom" x="65.5%" y="12%" width="17.5%" height="12%"></rect>
  <!-- Edit UI parts -->
  <rect class="svg-highlight prepared edit-ui" x="82.5%" y="3%" width="17.5%" height="18%"></rect>
  <rect class="svg-highlight prepared edit-ui-custom" x="82.5%" y="20%" width="17.5%" height="12%"></rect>
  <!-- SPA parts -->
  <rect class="svg-highlight prepared spa-all" x="0%" y="21%" width="83%" height="12%"></rect>
  <rect class="svg-highlight prepared spa-2sxc-js" x="31.5%" y="21%" width="52%" height="12%"></rect>
  <!-- Custom highlight boxes - can be controlled by in-page CSS -->
  <rect class="svg-highlight highlight1"></rect>
  <rect class="svg-highlight highlight2"></rect>
  <rect class="svg-highlight highlight3"></rect>
  <rect class="svg-highlight highlight4"></rect>
  <rect class="svg-highlight highlight5"></rect>
</svg>
  </div>
  <div class="overlay-description">
<p>you are here (click to zoom) - discover the <a class="xref" href="../../../basics/index.html">stack</a></p>
  </div>
</div>
<style>.context-box-summary .data-all, .context-box-summary .prepare-all { visibility: visible; } </style>
<h1 id="strictly-typed-data-models-guide-new-v1702">Strictly Typed Data Models Guide (new v17.02)</h1>
<p>In 2sxc 17 we introduced a new way to work with data, using compiled, strictly typed data models.</p>
<p>This guide should you understand how this works, how to use it, and how to handle various situations.</p>
<h2 id="to-document">To Document</h2>
<ol>
<li>How to extend the class</li>
<li>How to use Services (todo - separate page)</li>
</ol>
<h2 id="example-using-a-typed-model">Example Using a Typed Model</h2>
<pre><code class="lang-html">@inherits Custom.Hybrid.RazorTyped
@using AppCode.Data

@{
  // Wrap the data into a strong-typed AppCode.Data.Link object
  var links = AsList&lt;Link&gt;(MyItem);
}

@foreach (var link in links) {
  &lt;a href=&quot;@link.Url&quot;&gt;@link.Title&lt;/a&gt;
}
</code></pre>
<h2 id="how-this-works">How This Works</h2>
<p>The above example uses a strong-typed model called <code>Link</code> which is defined in the <code>AppCode.Data</code> namespace.
This model is a simple class which inherits from <code>Custom.Data.Item16</code>.
It implement <code>ITypedItem</code>, so it supports all the commands such as <code>.IsEmpty(...)</code> or <code>.String(...)</code>.</p>
<p>Usually the class is auto-generated by the <a class="xref" href="../../copilot/data-model-generator.html">2sxc Copilot</a>.
But you can also create it manually, OR extend the class to do more than what is auto-generated.
What's important is that when auto-generated, it will have a property for each data-field in the content-type.
This is why you can also write <code>@link.Url</code> and <code>@link.Title</code> in the example above.</p>
<p>What's great is that the generated code also has intellisense support, so the developer in VS Code
will be guided and see tips / instructions on every property.</p>
<h2 id="basic-how-to-use-and-access-properties">Basic How To Use and Access Properties</h2>
<p>The properties in the strong-typed model are usually simple properties, so you can use them like this:</p>
<pre><code class="lang-csharp">using AppCode.Data;

// Convert MyItem into a single strong-typed Product object
var product = As&lt;Product&gt;(MyItem);

var title = product.Title;          // title as string
var price = product.Price;          // price as decimal

// Links to URLs, Pages and Files / Images
var page = product.Page;            // url as string, terms like `page:72` will be resolved
var page2 = product.String(&quot;Page&quot;); // url as string, terms like `page:72` will not be resolved

var imageUrl = product.Image;       // image as string-url, terms like `file:123` will be resolved
var image2 = product.String(&quot;Image&quot;); // image as string, terms like `file:123` will not be resolved

var imageFile = product.ImageFile;  // image as IFile, terms like `file:123` will be resolved
var imageFolder = product.ImageFolder; // image as IFolder, may contain 0 or more files and folders

// Related Items
var cat1 = product.Category;        // App.Data.Category (if the content-type was configured correctly)
var cat2 = product.Category;        // ITypedItem (if the content-type was NOT configured correctly)

var cats1 = product.Categories;     // IEnumerable&lt;Category&gt; (if the content-type was configured correctly)
var cats2 = product.Categories;     // IEnumerable&lt;ITypedItem&gt; (if the content-type was NOT configured correctly)
</code></pre>
<p>Since the properties are real class properties, you can also use them in LINQ queries, like this:</p>
<pre><code class="lang-csharp">// Sort the products by the Color A-Z
var productsSorted = products.OrderBy(p =&gt; p.Color).ToList();

// Get the first product
var firstProduct = products.FirstOrDefault();
</code></pre>
<h2 id="conversions-lists-and-mocking">Conversions, Lists and Mocking</h2>
<p>This assumes that you have generated the data models using the Copilot.
We'll try to cover all common use cases using code samples.
These code samples assume you're working in Razor which inherit from <code>Custom.Hybrid.RazorTyped</code>.
It's similar for C# files inheriting from <code>Custom.Hybrid.CodeTyped</code>.</p>
<pre><code class="lang-csharp">// Use the Namespace
using AppCode;
using AppCode.Data;

// Convert any item into a single strong-typed object
// Will return null if the item is null
// Or throw an error if the item is not of the correct type
var product = As&lt;Product&gt;(MyItem);

// Convert any item into a single strong-typed object
// Will use the alternative if the item is null
var product = As&lt;Product&gt;(maybeNull) ?? alternative;

// Convert any item into a single strong-typed object
// Will return an empty Product object if the item is null
var product = As&lt;Product&gt;(maybeNull, mock: true);

// Convert any item into a single strong-typed object
// Will wrap the item to simulate a strong-typed object
var product = As&lt;Product&gt;(new { Title = &quot;hello&quot;, Color = &quot;green&quot; }, mock: true);

// Convert any item into a list of strong-typed objects
// Use a mock object as fallback
var products = AsList&lt;Product&gt;(maybeNull)
  ?? As&lt;Product&gt;(new { Title = &quot;hello&quot;, Color = &quot;green&quot; }, mock: true);

// convert a list of items into a list of strong-typed objects
var products = AsList&lt;Product&gt;(MyItems);

// Get all products from App Data - short and long example (internally identical)
var allProducts = AsList&lt;Product&gt;(App);
var allProducts = App.Data.GetAll&lt;Product&gt;(); // WIP - probably better to understand
var allProducts = AsList&lt;Product&gt;(App.Data.GetStream(&quot;Products&quot;));

// Get all the products from a query (default stream)
var greenProducts = AsList&lt;Product&gt;(App.GetQuery(&quot;GreenProducts&quot;));

// Get all the products from a query (specific stream)
var prodsInCategory = AsList&lt;Product&gt;(App.GetQuery(&quot;CategoryDetails&quot;).GetStream(&quot;Products&quot;));

</code></pre>
<h2 id="advanced-initialization-when-converting">Advanced Initialization when Converting</h2>
<p>Data Models can't have a constructor, since the object will be created internally.
But in case your data model needs some special initialization, you can do it like this:</p>
<pre><code class="lang-csharp">namespace AppCode.Data
{
  partial class Product
  {
    // Set this on Init
    public bool UserIsAdmin { get; set; }
    public string SpecialColor =&gt; UserIsAdmin &quot;gold&quot; : Color;
  }
}
</code></pre>
<p>And in the Razor/C# file which needs this</p>
<pre><code class="lang-csharp">// single item
var product = As&lt;Product&gt;(MyItem);
product.UserIsAdmin = MyUser.IsSiteAdmin;

// list of items
var products = AsList&lt;Product&gt;(MyItems)
  .Select(p =&gt; { p.UserIsAdmin = MyUser.IsSiteAdmin; return p; })
  .ToList();
</code></pre>
<h2 id="handing-over-to-razor-files">Handing Over to Razor Files</h2>
<p>The caller would do</p>
<pre><code class="lang-razor">@Html.Partial(&quot;Details.cshtml&quot;, new { product, category, suggestion = otherProduct })
</code></pre>
<p>The <code>Details.cshtml</code> would then look like this:</p>
<pre><code class="lang-razor">@{
  var product = MyModel.Get&lt;Product&gt;(&quot;Product&quot;);
  var category = MyModel.Get&lt;Category&gt;(&quot;Category&quot;);
  var suggestion = MyModel.Get&lt;Product&gt;(&quot;Suggestion&quot;);
}
</code></pre>
<h2 id="extending-the-class">Extending the Class</h2>
<p>todo</p>
<p>The properties are strong-typed</p>
<h2 id="history">History</h2>
<ol>
<li>Introduced in 2sxc v17.02</li>
</ol>

</article>

        <div class="contribution d-print-none">
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          
          <span>
            Made by <a href="https://www.2sic.com">2sic</a>
            with ðŸ’– and
            <a href="https://dotnet.github.io/docfx">docfx</a>
            â€” 
            for <a href="https://2sxc.org">2sxc</a>,
            <a href="https://dnncommunity.org/">Dnn</a> 
            and <a href="https://www.oqtane.org/">Oqtane</a>
            â€” 
            see also <a href="">2sxc Github</a> and <a href="https://blazor-cms.org">Blazor CMS</a>
          </span>
        </div>
      </div>
    </footer>
  </body>
</html>