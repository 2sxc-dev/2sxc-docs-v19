<!DOCTYPE html>
<html>
  <!-- 2sxc docs -->
  <head>
    <meta charset="utf-8">
      <title>Optimizing Template Assets / Client Dependencies (JS &amp; CSS) | 2sxc 19 for Dnn and Oqtane </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Optimizing Template Assets / Client Dependencies (JS &amp; CSS) | 2sxc 19 for Dnn and Oqtane ">
      
      <link rel="icon" href="../../../assets/favicon.ico">
      <link rel="stylesheet" href="../../../public/docfx.min.css">
      <link rel="stylesheet" href="../../../public/main.css">
      <meta name="docfx:navrel" content="../../../toc.html">
      <meta name="docfx:tocrel" content="../../toc.html">
      
      <meta name="docfx:rel" content="../../../">
      
      
      
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">      
  </head>

  <script type="module" src="./../../../public/docfx.min.js"></script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>

  <script async src="https://www.googletagmanager.com/gtag/js?id=GTM-PH2TVNW"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'GTM-PH2TVNW');
  </script>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../../index.html">
            <img id="logo" class="svg" src="../../../assets/logos/vcurrent/50.png" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">



              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">

                <a class="btn btn-sm border-0 text-nowrap version-button" href="https://go.2sxc.org/docs-versions" target="_blank" title="archive ðŸ”’">
                  v19 ðŸ”’ <i class="bi bi-caret-down-fill fs-6"></i>
                </a>
              </form>

              <ul class="navbar-nav">
                <li class="nav-item nav-link" style="color: red; font-weight: bold;">
                  ðŸ”’ ARCHIVE
                </li>
              </ul>

            
          </div>
        </div>
      </div></nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="Basics.Server.AssetOptimization.Index">
<h1 id="optimizing-template-assets--client-dependencies-js--css">Optimizing Template Assets / Client Dependencies (JS &amp; CSS)</h1>

<div class="float-end context-box-summary highlight-max" width="400px">
  <div class="fancybox-auto svg-highlight" style="width: 100%">
<svg version="1.1" baseprofile="full" viewbox="0 0 3229 2529" xmlns="http://www.w3.org/2000/svg">
  <image href="../../../pages/basics/stack/assets/stack-detailed.png" x="0" y="0" height="100%" width="100%"></image>
  <!-- Data Highlights -->
  <rect class="svg-highlight prepared data-all" x="0%" y="82%" width="84%" height="18%"></rect>
  <rect class="svg-highlight prepared data-data" x="19%" y="82%" width="64%" height="18%"></rect>
  <rect class="svg-highlight prepared data-assets-all" x="3%" y="82%" width="33%" height="18%"></rect>
  <rect class="svg-highlight prepared data-assets-app" x="3%" y="82%" width="17%" height="10%"></rect>
  <rect class="svg-highlight prepared data-assets-entities" x="18.5%" y="82%" width="17%" height="10%"></rect>
  <rect class="svg-highlight prepared data-configuration" x="3%" y="93%" width="17%" height="6.5%"></rect>
  <rect class="svg-highlight prepared data-entities" x="34%" y="82%" width="33%" height="10.5%"></rect>
  <rect class="svg-highlight prepared data-content-types" x="34%" y="89%" width="33%" height="10%"></rect>
  <rect class="svg-highlight prepared data-content-types-app" x="34%" y="89%" width="17.5%" height="10%"></rect>
  <rect class="svg-highlight prepared data-content-types-global" x="50%" y="89%" width="17%" height="10%"></rect>
  <rect class="svg-highlight prepared data-external" x="65.5%" y="82%" width="17%" height="10.5%"></rect>
  <!-- ADAM -->
  <rect class="svg-highlight prepared adam" x="18.5%" y="89%" width="17%" height="8%"></rect>
  <!-- Server -->
  <rect class="svg-highlight prepared server-all" x="0%" y="41%" width="84%" height="38%"></rect>
  <!-- Prepare -->
  <rect class="svg-highlight prepared prepare-all" x="0%" y="61%" width="84%" height="18%"></rect>
  <rect class="svg-highlight prepared query" x="44.5%" y="61%" width="34%" height="18%"></rect>
  <rect class="svg-highlight prepared query-engine" x="44.5%" y="70%" width="34%" height="7%"></rect>
  <rect class="svg-highlight prepared query-built-in" x="44.5%" y="62.5%" width="18%" height="11%"></rect>
  <rect class="svg-highlight prepared query-app" x="60.5%" y="62.5%" width="17%" height="11%"></rect>
  <rect class="svg-highlight prepared query-datasource" x="71%" y="70%" width="7%" height="7%"></rect>
  <rect class="svg-highlight prepared query-params" x="65%" y="70%" width="10%" height="7%"></rect>
  <!-- Data Source -->
  <rect class="svg-highlight prepared datasource" x="86%" y="51%" width="13%" height="16%"></rect>
  <rect class="svg-highlight prepared datasource-custom" x="87.5%" y="54.5%" width="12%" height="6%"></rect>
  <rect class="svg-highlight prepared datasource-built-in" x="87.5%" y="59%" width="12%" height="7%"></rect>
  <rect class="svg-highlight prepared lookup" x="86%" y="66%" width="13%" height="15%"></rect>
  <rect class="svg-highlight prepared lookup-engine" x="87.5%" y="69%" width="12%" height="6%"></rect>
  <rect class="svg-highlight prepared lookup-sources" x="87.5%" y="73%" width="12%" height="7%"></rect>
  <!-- Optimzers -->
  <rect class="svg-highlight prepared asset-optimizer" x="3%" y="49.5%" width="13.5%" height="8%"></rect>
  <rect class="svg-highlight prepared image-resizer" x="15%" y="30%" width="17%" height="34%"></rect>
  <!-- Process / Awesomize -->
  <rect class="svg-highlight prepared process-all" x="0%" y="41%" width="84%" height="18%"></rect>
  <rect class="svg-highlight prepared process-cs" x="34%" y="41%" width="33%" height="18%"></rect>
  <rect class="svg-highlight prepared process-razor" x="34.3%" y="42%" width="17%" height="15%"></rect>
  <rect class="svg-highlight prepared process-razor-app" x="34.3%" y="42%" width="17%" height="10%"></rect>
  <rect class="svg-highlight prepared process-razor-engine" x="34.3%" y="50%" width="17%" height="7%"></rect>
  <rect class="svg-highlight prepared process-apis" x="50%" y="42%" width="34%" height="15%"></rect>
  <rect class="svg-highlight prepared process-web-api" x="50%" y="42%" width="17%" height="15%"></rect>
  <rect class="svg-highlight prepared process-web-api-app" x="50%" y="42%" width="17%" height="10%"></rect>
  <rect class="svg-highlight prepared process-web-api-engine" x="50%" y="50%" width="17%" height="7%"></rect>
  <rect class="svg-highlight prepared process-libraries" x="47%" y="47%" width="7%" height="7%"></rect>
  <rect class="svg-highlight prepared process-headless" x="65.5%" y="49.5%" width="17%" height="7%"></rect>
  <!-- Libraries -->
  <rect class="svg-highlight prepared libraries" x="86%" y="38%" width="13%" height="15%"></rect>
  <rect class="svg-highlight prepared libraries-app" x="87.5%" y="41%" width="12%" height="6.5%"></rect>
  <rect class="svg-highlight prepared libraries-built-in" x="87.5%" y="46%" width="12%" height="6%"></rect>
  <!-- data formats -->
  <rect class="svg-highlight prepared format-json-custom" x="50%" y="32%" width="17%" height="14%"></rect>
  <rect class="svg-highlight prepared format-json-headless" x="65.5%" y="32%" width="17%" height="21%"></rect>
  <rect class="svg-highlight prepared format-json-edit" x="74%" y="30%" width="19%" height="23%"></rect>
  <!-- Browser -->
  <rect class="svg-highlight prepared browser-all" x="0%" y="0%" width="100%" height="34%"></rect>
  <rect class="svg-highlight prepared browser-show" x="0%" y="0%" width="50%" height="34%"></rect>
  <rect class="svg-highlight prepared browser-interact-edit" x="47%" y="0%" width="37%" height="34%"></rect>
  <rect class="svg-highlight prepared browser-interact" x="47%" y="0%" width="20.5%" height="34%"></rect>
  <rect class="svg-highlight prepared browser-edit" x="64%" y="0%" width="20.5%" height="34%"></rect>
  <rect class="svg-highlight prepared browser-edit-ui" x="81.5%" y="0%" width="18%" height="34%"></rect>
  <!-- Frameworks -->
  <rect class="svg-highlight prepared frameworks-browser" x="0%" y="0%" width="17.5%" height="34%"></rect>
  <rect class="svg-highlight prepared frameworks-CSS" x="0%" y="3%" width="17.5%" height="12%"></rect>
  <rect class="svg-highlight prepared frameworks-js" x="0%" y="12%" width="17.5%" height="12%"></rect>
  <rect class="svg-highlight prepared frameworks-spa" x="0%" y="21%" width="17.5%" height="12%"></rect>
  <!-- App show parts -->
  <rect class="svg-highlight prepared show-html" x="15.8%" y="3%" width="17.5%" height="12%"></rect>
  <rect class="svg-highlight prepared show-js" x="15.8%" y="12%" width="17.5%" height="12%"></rect>
  <rect class="svg-highlight prepared show-spa" x="15.8%" y="21%" width="17.5%" height="12%"></rect>
  <!-- Interact parts -->
  <rect class="svg-highlight prepared interact-mobile" x="48.5%" y="3%" width="17.5%" height="12%"></rect>
  <rect class="svg-highlight prepared interact-2sxc" x="48.5%" y="12%" width="17.5%" height="12%"></rect>
  <!-- Edit parts -->
  <rect class="svg-highlight prepared edit-auto" x="65.5%" y="3%" width="17.5%" height="12%"></rect>
  <rect class="svg-highlight prepared edit-custom" x="65.5%" y="12%" width="17.5%" height="12%"></rect>
  <!-- Edit UI parts -->
  <rect class="svg-highlight prepared edit-ui" x="82.5%" y="3%" width="17.5%" height="18%"></rect>
  <rect class="svg-highlight prepared edit-ui-custom" x="82.5%" y="20%" width="17.5%" height="12%"></rect>
  <!-- SPA parts -->
  <rect class="svg-highlight prepared spa-all" x="0%" y="21%" width="83%" height="12%"></rect>
  <rect class="svg-highlight prepared spa-2sxc-js" x="31.5%" y="21%" width="52%" height="12%"></rect>
  <!-- Custom highlight boxes - can be controlled by in-page CSS -->
  <rect class="svg-highlight highlight1"></rect>
  <rect class="svg-highlight highlight2"></rect>
  <rect class="svg-highlight highlight3"></rect>
  <rect class="svg-highlight highlight4"></rect>
  <rect class="svg-highlight highlight5"></rect>
</svg>
  </div>
  <div class="overlay-description">
<p>you are here (click to zoom) - discover the <a class="xref" href="../../index.html">stack</a></p>
  </div>
</div>
<style>.context-box-summary .asset-optimizer { visibility: visible; } </style>
<p>Learn about using the Dnn Client-Resource-Management aka Dnn Client-Depedency-Management in 2sxc templates.</p>
<p>Whenever a template needs additional files, specifically</p>
<ol>
<li>JavaScripts</li>
<li>CSS Styles</li>
<li>Image Resources</li>
<li>Fonts</li>
</ol>
<p>These should be included in an optimized form to enhance performance dramatically. This is all about reducing the amount of server requests (very important for end-user performance) and delivering them in the order / places in the HTML-file, optimal for their purpose.</p>
<p>So far 2sxc will take care of your JS/CSS files by bundling and minifying them, at the position and order you need.</p>
<h2 id="how-to-use">How to use</h2>
<p>Here's a trivial example for optimizing a CSS with default settings:</p>
<pre><code class="lang-html">&lt;link rel=&quot;stylesheet&quot; href=&quot;@App.Path/style.css&quot; @Kit.Page.AssetAttributes() /&gt;
</code></pre>
<p>This will</p>
<ol>
<li>Create a link to the file <code>styles.css</code> in the current App</li>
<li>Add some attributes which will enable optimizations</li>
<li>If you have <a class="xref" href="../../../abyss/security/csp/index.html">Content Security Policy (CSP)</a> enabled, it will also <a class="xref" href="../../../abyss/security/csp/whitelist.html">whitelist the resources in CSP</a></li>
</ol>
<p>Here's a more typical example, showing an optimization for a style &amp; js which are inside the app-folder. This example uses Razor, so we use <code>@App.Path</code> to ensure it's picking up the right folder (use <code>[App:Path]</code> in token-templates):</p>
<pre><code class="lang-razor">&lt;link rel=&quot;stylesheet&quot; href=&quot;@App.Path/assets/style.css&quot;
    @Kit.Page.AssetAttributes(priority: 150) /&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;@App.Path/assets/lazy.css&quot;
    @Kit.Page.AssetAttributes(position: &quot;bottom&quot;) /&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;@App.Path/assets/scripts.js&quot;
    @Kit.Page.AssetAttributes(priority: 200, position: &quot;bottom&quot;) /&gt;
&lt;/script&gt;
</code></pre>
<p>This shows:</p>
<ol>
<li>a CSS with lower <a href="#understanding-priorities">priority</a> (150 instead of the default 100)</li>
<li>a css with which will be <a href="#understanding-placement">placed</a> at the page bottom (so it will load later)</li>
<li>a script-tag and specifies <a href="#understanding-priorities">priority</a> and <a href="#understanding-placement">placement</a> inside the HTML document</li>
</ol>
<h2 id="how-it-works">How it works</h2>
<p>Basically all <code>&lt;script&gt;</code> tags and all <code>&lt;link rel=&quot;stylesheet&quot;&gt;</code> tags can have a special attribute, which the system will parse according to the environments capabilities. In Dnn 7/8/9 this means it can</p>
<ul>
<li>can assign priorities (to ensure load-order)</li>
<li>can assign placement in the html-document (head, body, bottom)</li>
</ul>
<h2 id="understanding-priorities">Understanding Priorities</h2>
<p>There is a fairly complicated article in the <a href="http://www.dnnsoftware.com/wiki/client-resource-management-api">dnn wiki about client resource management</a> which explains most of it. In general you can say that all Dnn scripts load with priorities below 100, the default for all standard scripts is 100, and from there you can order things as you need them.</p>
<p>We usually prioritize libraries like <code>2sxc</code> or <code>angular.min.js</code> with 100 or larger, and then place our own script (like an app-blog.min.js) at numbers like 200.</p>
<h2 id="understanding-placement">Understanding Placement</h2>
<p>Placement information can only be supplied in 2sxc 8.9 or higher. The three positions are:</p>
<ul>
<li><code>head</code> meaning that the resulting data is requested in the HTML header. So it will be loaded before the page is rendered, meaning it's available right from the start but also delays page-build. This is often detrimental in terms of page-load times.<br>
<em>this is the default location for CSS files</em></li>
<li><code>body</code> meaning it will be loaded in the beginning of the HTML body tag. Again this means it's there very early, but will slow down page buildup.<br>
<em>this is the default location for JS files</em></li>
<li><code>bottom</code> meaning it will be loaded at the end of the html document. This is actually great for page-loading performance to improve <em>above-the-fold</em> loading. But it takes a bit of work to perfect its application.</li>
</ul>
<h2 id="read-also">Read also</h2>
<ul>
<li><a href="http://www.dnnsoftware.com/wiki/client-resource-management-api">Dnn API Documentation</a></li>
<li><a href="http://2sxc.org/en/blog/post/the-trouble-with-dnn-javascript-css-minification-aka-client-dependency-resource-management">Blog about problems with the Dnn resource management</a> in case you run into problems</li>
</ul>
<h2 id="demo-app-and-further-links">Demo App and further links</h2>
<p>You should find some code examples in this demo App</p>
<ul>
<li>basically this is used in every app in the <a href="http://2sxc.org/en/apps">app-catalog</a></li>
</ul>
<hr>
<h2 id="old-api-before-v14">Old API Before v14</h2>
<p>The syntax above using the <code>@Kit.Page</code> <a class="xref" href="../../../api/dot-net/ToSic.Sxc.Services.IPageService.html">IPageService</a>.
It was introduced in v14 and requires your Razor to inherit from <a class="xref" href="../../../api/dot-net/Custom.Hybrid.Razor14.html">Razor14</a> or later.
This is the recommended way of doing this.
But there is also a more manual way for older razor files, like this:</p>
<pre><code class="lang-razor">&lt;link rel=&quot;stylesheet&quot; href=&quot;/style.css&quot; data-enableoptimizations=&quot;true&quot; /&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;@App.Path/assets/style.css&quot;
    data-enableoptimizations=&quot;150&quot; /&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;@App.Path/assets/lazy.css&quot;
    data-enableoptimizations=&quot;bottom&quot; /&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;@App.Path/assets/scripts.js&quot;
    data-enableoptimizations=&quot;200:bottom&quot; /&gt;
&lt;/script&gt;
</code></pre>
<hr>
<h2 id="history">History</h2>
<ol>
<li>Introduced in Version 04.00 with true/false</li>
<li>Enhanced in Version 06.00 with priority numbers</li>
<li>Enhanced in 08.09 with position head/body/bottom</li>
</ol>

</article>

        <div class="contribution d-print-none">
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          
          <span>
            Made by <a href="https://www.2sic.com">2sic</a>
            with ðŸ’– and
            <a href="https://dotnet.github.io/docfx">docfx</a>
            â€” 
            for <a href="https://2sxc.org">2sxc</a>,
            <a href="https://dnncommunity.org/">Dnn</a> 
            and <a href="https://www.oqtane.org/">Oqtane</a>
            â€” 
            see also <a href="">2sxc Github</a> and <a href="https://blazor-cms.org">Blazor CMS</a>
          </span>
        </div>
      </div>
    </footer>
  </body>
</html>