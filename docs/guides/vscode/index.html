<!DOCTYPE html>
<html>
  <!-- 2sxc docs -->
  <head>
    <meta charset="utf-8">
      <title>Visual Studio Code - Guide | 2sxc 19 for Dnn and Oqtane </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Visual Studio Code - Guide | 2sxc 19 for Dnn and Oqtane ">
      
      <link rel="icon" href="../../assets/favicon.ico">
      <link rel="stylesheet" href="../../public/docfx.min.css">
      <link rel="stylesheet" href="../../public/main.css">
      <meta name="docfx:navrel" content="../../toc.html">
      <meta name="docfx:tocrel" content="../toc.html">
      
      <meta name="docfx:rel" content="../../">
      
      
      
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">      
  </head>

  <script type="module" src="./../../public/docfx.min.js"></script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>

  <script async src="https://www.googletagmanager.com/gtag/js?id=GTM-PH2TVNW"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'GTM-PH2TVNW');
  </script>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../index.html">
            <img id="logo" class="svg" src="../../assets/logos/vcurrent/50.png" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">



              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">

                <a class="btn btn-sm border-0 text-nowrap version-button" href="https://go.2sxc.org/docs-versions" target="_blank" title="archive ðŸ”’">
                  v19 ðŸ”’ <i class="bi bi-caret-down-fill fs-6"></i>
                </a>
              </form>

              <ul class="navbar-nav">
                <li class="nav-item nav-link" style="color: red; font-weight: bold;">
                  ðŸ”’ ARCHIVE
                </li>
              </ul>

            
          </div>
        </div>
      </div></nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="Guides.VsCode.Index">
<h1 id="visual-studio-code---guide">Visual Studio Code - Guide</h1>

<p>This guide will help you get VS Code Setup as best as possible for 2sxc development.</p>
<div class="TIP">
<h5>Tip</h5>
<p>You'll often write code in your 2sxc Apps - either as C#/Razor or JavaScript.
2sxc is a very open system, so you can use any editor you like.
For quick fixes and simple things, use the built-in editor, which is based on Monaco (VS Code Online).
But for more sophisticated stuff we <strong>highly recommend</strong> VS Code.</p>
</div>
<div class="IMPORTANT">
<h5>Important</h5>
<p>In 2024-05 the C# DevKit suddenly stopped working.
We found a fix - pls update your <code>app.sln</code> to the newest sample below.</p>
</div>
<h2 id="prepare-vs-code-for-2sxc">Prepare VS Code for 2sxc</h2>
<p>VSCode is amazing right out of the box, but to really be productive, you need to do a few things:</p>
<ol>
<li>Install VS Code</li>
<li>Install the <a href="https://marketplace.visualstudio.com/items?itemName=ms-dotnettools.csdevkit">C# DevKit extensions</a></li>
<li>Configure each App with
<ol>
<li>Intellisense (see below)</li>
<li>Ignore the <code>obj</code> and <code>.vs</code> folders (see below)</li>
</ol>
</li>
<li>Check possible edge cases (see below)</li>
</ol>
<p>With these preparations, VS-Code is able to assist in basic C# code.
It can't provide IntelliSense for 2sxc specific APIs yet, so for that, read on.</p>
<h2 id="configure-an-app-for-razor-intellisense">Configure an App for Razor IntelliSense</h2>
<p>Apps are usually opened as a folder in VS-Code.
The problem for IntelliSense is that it doesn't know which DLLs it should use.
So you need to tell it.
This is done by adding a <code>.sln</code> solution file and a <code>.csproj</code> project file.</p>
<div class="TIP">
<h5>Tip</h5>
<p>Adding these files helps VSCode provide IntelliSense.
But be aware that it can't help with <code>dynamic</code> code.
To get the full benefit, use <a class="xref" href="../../net-code/api-typed/index.html">typed code</a>.</p>
</div>
<p>Add the following two files to the root of your app:</p>
<p><strong>Template for the <code>/app.sln</code> file</strong></p>
<pre><code class="lang-text">Microsoft Visual Studio Solution File, Format Version 12.00
# Visual Studio Version 17
VisualStudioVersion = 17.5.002.0
Project(&quot;{9A19103F-16F7-4668-BE54-9A1E7A4F7556}&quot;) = &quot;App&quot;, &quot;app.csproj&quot;, &quot;{9F7A078F-99D5-4EF4-8EC0-C6B920FE679C}&quot;
EndProject

#
# Visual Studio .sln File for 2sxc App
# This is necessary so that VS Code can perform intellisense in Razor
# It also requires a csproj file to exist as well
# 
# Read more and get help for issues on https://go.2sxc.org/vscode
#

# Addition 2024-05
# The following section is suddenly required by the C# DevKit
# See https://github.com/microsoft/vscode-dotnettools/issues/1151
Global
	GlobalSection(SolutionConfigurationPlatforms) = preSolution
		Debug|Any CPU = Debug|Any CPU
		Release|Any CPU = Release|Any CPU
	EndGlobalSection
	GlobalSection(SolutionProperties) = preSolution
		HideSolutionNode = FALSE
	EndGlobalSection
EndGlobal
</code></pre>
<p><strong>Template for the <code>/app.csproj</code> file</strong></p>
<pre><code class="lang-xml">&lt;Project Sdk=&quot;Microsoft.NET.Sdk.Web&quot;&gt;
  &lt;!-- This file helps VS Code provide IntelliSense - see https://go.2sxc.org/vscode --&gt;
  &lt;!-- Template v2024-06-19. If you have issues, try getting a newer copy from the url above --&gt;

  &lt;!-- Specify the default Namespace for C# code in this specific App --&gt;
  &lt;PropertyGroup&gt;
    &lt;RootNamespace&gt;AppCode&lt;/RootNamespace&gt;
  &lt;/PropertyGroup&gt;

  &lt;!-- First: Detect if it's running in Dnn, Oqtane-Production or Oqtane-Dev --&gt;
  &lt;PropertyGroup&gt;
    &lt;RunningInDnn Condition=&quot;Exists('..\..\..\..\bin\DotNetNuke.dll')&quot;&gt;true&lt;/RunningInDnn&gt;
    &lt;RunningInOqtane Condition=&quot;Exists('..\..\..\Oqtane.Server.dll') Or Exists('..\..\..\bin\Debug\net8.0\Oqtane.Server.dll')&quot;&gt;true&lt;/RunningInOqtane&gt;
    &lt;OqtaneIsProd Condition=&quot;Exists('..\..\..\Oqtane.Server.dll')&quot;&gt;true&lt;/OqtaneIsProd&gt;
    &lt;OqtaneIsDev Condition=&quot;Exists('..\..\..\bin\Debug\net8.0\Oqtane.Server.dll')&quot;&gt;true&lt;/OqtaneIsDev&gt;
  &lt;/PropertyGroup&gt;

  &lt;!-- Settings for Dnn --&gt;
  &lt;PropertyGroup Condition=&quot;'$(RunningInDnn)' == 'true'&quot;&gt;
    &lt;!-- Specify .net 4.7.2, C# 8.0 and Bin folder for DNN - see https://go.2sxc.org/vscode --&gt;
    &lt;TargetFramework&gt;net472&lt;/TargetFramework&gt;
    &lt;LangVersion&gt;8.0&lt;/LangVersion&gt;
    &lt;PathBin&gt;..\..\..\..\bin&lt;/PathBin&gt;
  &lt;/PropertyGroup&gt;
  
  &lt;!-- Settings for Oqtane --&gt;
  &lt;PropertyGroup Condition=&quot;'$(RunningInOqtane)' == 'true'&quot;&gt;
    &lt;!-- Oqtane 5+ uses .net 8 and a very new C# language version --&gt;
    &lt;TargetFramework&gt;net8.0&lt;/TargetFramework&gt;
    &lt;LangVersion&gt;latest&lt;/LangVersion&gt;

    &lt;!-- PathBin Oqtane production, the bin folder is in the root, just up 3 folders, no bin-subfolder --&gt;
    &lt;PathBin Condition=&quot;'$(OqtaneIsProd)' == 'true'&quot;&gt;..\..\..&lt;/PathBin&gt;

    &lt;!-- PathBin Oqtane dev/debug, the bin folder is deeper down, up 3 folders and current build folder --&gt;
    &lt;PathBin Condition=&quot;'$(OqtaneIsDev)' == 'true'&quot;&gt;..\..\..\bin\Debug\net8.0&lt;/PathBin&gt;
  &lt;/PropertyGroup&gt;


  &lt;!-- IntelliSense: Load all DLLs which exist in Dnn and Oqtane from the bin folder --&gt;
  &lt;ItemGroup&gt;
    &lt;Reference Include=&quot;$(PathBin)\ToSic.*.dll&quot; /&gt;
    &lt;Reference Include=&quot;$(PathBin)\Connect.Koi.dll&quot; /&gt;

    &lt;!-- Common Microsoft DLLs --&gt;
    &lt;Reference Include=&quot;$(PathBin)\System.Text.Json.dll&quot; /&gt;

    &lt;!-- Also load files in the Dependencies folder of the current App --&gt;
    &lt;Reference Include=&quot;Dependencies\*.dll&quot; /&gt;
  &lt;/ItemGroup&gt;

  &lt;!-- IntelliSense: DNN specific --&gt;
  &lt;ItemGroup Condition=&quot;'$(RunningInDnn)' == 'true'&quot;&gt;
    &lt;!-- also add System.Web and DotNetNuke DLLs - useful when creating APIs, but be aware that it may make your code less hybrid --&gt;
    &lt;Reference Include=&quot;$(PathBin)\DotNetNuke.dll&quot; /&gt;
    &lt;Reference Include=&quot;$(PathBin)\DotNetNuke.*.dll&quot; /&gt;
    &lt;Reference Include=&quot;$(PathBin)\System.Web.Http.dll&quot; /&gt;
    &lt;Reference Include=&quot;$(PathBin)\System.Web.WebPages.dll&quot; /&gt;

    &lt;!-- System.Web is not in the DNN folder but in the .net Framework installed on the server --&gt;
    &lt;Reference Include=&quot;System.Web&quot; /&gt;
    &lt;Reference Include=&quot;System.Net.Http&quot; /&gt;
  &lt;/ItemGroup&gt;

  &lt;!-- Polymorphism - if have files with the same classes confuse IntelliSense - see https://go.2sxc.org/vscode --&gt;
  &lt;!-- Example: exclude /live as we're always working on /staging --&gt;
  &lt;ItemGroup&gt;
    &lt;None Remove=&quot;live\**&quot; /&gt;
    &lt;Content Remove=&quot;live\**&quot; /&gt;
    &lt;Compile Remove=&quot;live\**&quot; /&gt;
    &lt;EmbeddedResource Remove=&quot;live\**&quot; /&gt;
  &lt;/ItemGroup&gt;

&lt;/Project&gt;
</code></pre>
<h3 id="more-about-the-csproj-file">More About the <code>.csproj</code> File</h3>
<p>The following are some additional notes about the <code>.csproj</code> file, how it works and it's values.</p>
<h4 id="detect-dnn-or-oqtane">Detect Dnn or Oqtane</h4>
<p>At the top of the <code>.csproj</code> file, we detect if we're running in Dnn or Oqtane like this:</p>
<pre><code class="lang-xml">  &lt;!-- First: Detect if it's running in Dnn, Oqtane-Production or Oqtane-Dev --&gt;
  &lt;PropertyGroup&gt;
    &lt;RunningInDnn Condition=&quot;Exists('..\..\..\..\bin\DotNetNuke.dll')&quot;&gt;true&lt;/RunningInDnn&gt;
    &lt;RunningInOqtane Condition=&quot;Exists('..\..\..\Oqtane.Server.dll') Or Exists('..\..\..\bin\Debug\net8.0\Oqtane.Server.dll')&quot;&gt;true&lt;/RunningInOqtane&gt;
    &lt;OqtaneIsProd Condition=&quot;Exists('..\..\..\Oqtane.Server.dll')&quot;&gt;true&lt;/OqtaneIsProd&gt;
    &lt;OqtaneIsDev Condition=&quot;Exists('..\..\..\bin\Debug\net8.0\Oqtane.Server.dll')&quot;&gt;true&lt;/OqtaneIsDev&gt;
  &lt;/PropertyGroup&gt;
</code></pre>
<p>This sets variables such as <code>RunningInDnn</code> and <code>RunningInOqtane</code> which you can use later in the file.
You can see it in action in things such as:</p>
<pre><code class="lang-xml">  &lt;!-- Settings for Dnn --&gt;
  &lt;PropertyGroup Condition=&quot;'$(RunningInDnn)' == 'true'&quot;&gt;
    &lt;!-- this is only applied, if the condition above is true --&gt;
    &lt;TargetFramework&gt;net472&lt;/TargetFramework&gt;
  &lt;/PropertyGroup&gt;
</code></pre>
<h4 id="about-propertygroup-and-itemgroup">About PropertyGroup and ItemGroup</h4>
<p>In case you're not familiar with <code>.csproj</code> files, here's a quick overview:</p>
<ul>
<li><code>PropertyGroup</code> is used to define variables which are used later in the file</li>
<li><code>ItemGroup</code> is used to define lists of items, like files, references, etc.</li>
</ul>
<p>Both of these can have conditions, so you can define different settings for different situations.</p>
<h4 id="target-framework-and-c-version">Target Framework and C# Version</h4>
<p>The <code>TargetFramework</code> is the .net Framework you are targeting.
The value like <code>net472</code> or <code>net48</code> are called <em>target framework moniker</em> or <em>TFM</em>.
You can find a list of them on the <a href="https://learn.microsoft.com/en-us/dotnet/standard/frameworks">Microsoft Docs</a>.
Recommended values:</p>
<ul>
<li>Dnn: <code>net472</code> or <code>net48</code> (officially, Dnn requires 4.7.2, but 4.8 is what is normally installed because of security)</li>
<li>Oqtane: <code>net8.0</code> (Oqtane 5+)</li>
</ul>
<p>The <code>LangVersion</code> is the C# version you are using.
You can find a list of them on the <a href="https://learn.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-version-history">Microsoft Docs</a>.
Recommended values:</p>
<ul>
<li>Dnn: <code>8.0</code> (Dnn 9.6.1+ using 2sxc 17 and Roslyn Compiler)</li>
<li>Oqtane: <code>latest</code> or <code>12.0</code> (Oqtane 5+)</li>
</ul>
<h4 id="pathbin">PathBin</h4>
<p>The <code>PathBin</code> variable is used to specify the path where the DLLs are.
This allows us to use the same rules for Dnn and Oqtane, just with a different path to start from.
Here's what you should know:</p>
<ul>
<li>Dnn usually has the App files in <code>/Portals/[portal]/2sxc/[app]/</code> so the DLLs relatively in <code>..\..\..\..\bin</code></li>
<li>Oqtane has the App files in <code>/2sxc/[site-id]/app/</code> but the DLLs are in different locations depending on Dev vs. Production builds
<ul>
<li>in development built it places the DLLs in <code>\bin\Debug\net8.0</code> so the relative path is usually <code>..\..\..\bin\Debug\net8.0</code></li>
<li>in production builds it places the DLLs in the root folder, so the relative path is usually <code>..\..\..</code></li>
</ul>
</li>
</ul>
<h4 id="ignoring-files-for-polymorphism">Ignoring Files for Polymorphism</h4>
<p>If you're working with Polymorphism then you have many of the same files, which confuses IntelliSense.
For example, <code>/live</code> and <code>/staging</code> have the same files, and <code>/bs3</code>, <code>/bs4</code> and <code>/bs5</code> have the same files.
So intellisense might find the same class in multiple places, and show warnings.</p>
<p>To handle this, you should decide which is your <strong>primary</strong> folder, and then exclude the others.
This is just an example to exclude <code>/live</code> as we're always working on <code>/staging</code>:</p>
<pre><code class="lang-xml">  &lt;!-- Example: exclude /live as we're always working on /staging --&gt;
  &lt;ItemGroup&gt;
    &lt;None Remove=&quot;live\**&quot; /&gt;
    &lt;Content Remove=&quot;live\**&quot; /&gt;
    &lt;Compile Remove=&quot;live\**&quot; /&gt;
    &lt;EmbeddedResource Remove=&quot;live\**&quot; /&gt;
  &lt;/ItemGroup&gt;
</code></pre>
<h2 id="gitignore-temporary-folders">GitIgnore Temporary Folders</h2>
<p>Add these lines to your <code>.gitignore</code> file to prevent temporary files from being added to your repository:</p>
<pre><code class="lang-text">.vs/
obj/
bin/
</code></pre>
<h2 id="check-for-edge-cases---dnn-with-net-472--48">Check for Edge Cases - DNN with .net 4.7.2 / 4.8</h2>
<p>If you're using DNN with .net 4.7.2 or 4.8, you may have to do some extra work.
We're still not 100% sure what this is, since our dev PCs are always setup with all kinds of build tools where it works.
According to research by <a href="https://www.accu4.com/H2R2S/VS-Code-IntelliSense">Accuraty</a>
you may need to follow the instructions as noted on the <a href="https://marketplace.visualstudio.com/items?itemName=ms-dotnettools.csharp">C# extension</a>.</p>
<p>The <strong>C#</strong> extension is auto-installed by the Dev-Kit, but there is this (quoted):</p>
<div class="NOTE">
<h5>Note</h5>
<p>Note: If working on a solution that requires versions prior to .NET 6 or non-solution based projects, install a .NET Framework runtime and MSBuild tooling.</p>
<ul>
<li>Set omnisharp.useModernNet to false and set dotnet.server.useOmnisharp to true</li>
<li>Uninstall or disable C# Dev Kit <strong>we're not sure if this is correct any more!</strong></li>
<li>Windows: .NET Framework along with MSBuild Tools</li>
<li>MacOS/Linux: Mono with MSBuild</li>
</ul>
</div>
<p>According to our current understanding you don't need to do this is you have Visual Studio 2022 installed.
We assume that already includes all the bits which VS Code needs as well.</p>
<p>We haven't been able to verify or simplify this, but if you're having trouble,
do read the blog post by <a href="https://www.accu4.com/H2R2S/VS-Code-IntelliSense">Accuraty</a> as well.</p>
<h2 id="warnings-when-using-intellisense">Warnings when Using IntelliSense</h2>
<div class="WARNING">
<h5>Warning</h5>
<p>IntelliSense can show you <em>internal</em> APIs which will change over time.</p>
</div>
<p>IntelliSense is an amazing productivity boost, but you should avoid using internal APIs.</p>
<p>To make this unlikely, we spent a LOT of time to clearly mark internal stuff.
Avoid the following:</p>
<ol>
<li>Almost everything in the <code>ToSic.Eav.*</code> namespace is usually internal, so avoid using it
<ol>
<li>Exception: <code>ToSic.Eav.DataSource</code> and <code>ToSic.Eav.DataSources</code> are really public</li>
</ol>
</li>
<li>Anything in a <code>*.Internal</code> namespace</li>
<li>Anything in a <code>*.Integration</code> namespace</li>
<li>Anything in a <code>*.Backend</code> namespace</li>
<li>Anything in a <code>*.Sys</code> namespace</li>
<li>Anything marked with <code>[Obsolete]</code></li>
<li>Anything marked with <code>[EditorBrowsable(EditorBrowsableState.Never)]</code> - IntelliSense will not show these APIs</li>
<li>Properties beginning with an underscore, eg <code>_Something</code></li>
</ol>
<h2 id="known-issues-when-c-intellisense-is-not-working">Known Issues when C# IntelliSense is not Working</h2>
<div class="TIP">
<h5>Tip</h5>
<p>Here we try to collect known issues and solutions.</p>
</div>
<ol>
<li>A razor file has the same name as a C# class in the AppCode Folder<br>
<em>This will confuse the IntelliSense, since the Razor file will magically be seen as a class with the same name.</em>
Solution: Rename the Razor file to something else.</li>
</ol>
<h2 id="configure-an-app-for-javascript-intellisense">Configure an App for JavaScript IntelliSense</h2>
<p>TODO: this is not yet documented</p>
<h2 id="other-guides">Other Guides</h2>
<ul>
<li><a href="https://www.accu4.com/H2R2S/VS-Code-IntelliSense">Very helpful guide by Accuraty</a></li>
</ul>
<hr>
<h2 id="history">History</h2>
<ul>
<li>Added v16.07 2023-10</li>
<li>2024-06-19 - Added more details about the <code>.csproj</code> file incl. date-version and correct DNN System.Net.Http reference</li>
</ul>
<p>Shortlink: <a href="https://go.2sxc.org/vscode">https://go.2sxc.org/vscode</a></p>

</article>

        <div class="contribution d-print-none">
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          
          <span>
            Made by <a href="https://www.2sic.com">2sic</a>
            with ðŸ’– and
            <a href="https://dotnet.github.io/docfx">docfx</a>
            â€” 
            for <a href="https://2sxc.org">2sxc</a>,
            <a href="https://dnncommunity.org/">Dnn</a> 
            and <a href="https://www.oqtane.org/">Oqtane</a>
            â€” 
            see also <a href="">2sxc Github</a> and <a href="https://blazor-cms.org">Blazor CMS</a>
          </span>
        </div>
      </div>
    </footer>
  </body>
</html>