<!DOCTYPE html>
<html>
  <!-- 2sxc docs -->
  <head>
    <meta charset="utf-8">
      <title>turnOn JavaScript API Specs (WIP!) | 2sxc 19 for Dnn and Oqtane </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="turnOn JavaScript API Specs (WIP!) | 2sxc 19 for Dnn and Oqtane ">
      
      <link rel="icon" href="../../assets/favicon.ico">
      <link rel="stylesheet" href="../../public/docfx.min.css">
      <link rel="stylesheet" href="../../public/main.css">
      <meta name="docfx:navrel" content="../../toc.html">
      <meta name="docfx:tocrel" content="../toc.html">
      
      <meta name="docfx:rel" content="../../">
      
      
      
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">      
  </head>

  <script type="module" src="./../../public/docfx.min.js"></script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>

  <script async src="https://www.googletagmanager.com/gtag/js?id=GTM-PH2TVNW"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'GTM-PH2TVNW');
  </script>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../index.html">
            <img id="logo" class="svg" src="../../assets/logos/vcurrent/50.png" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">



              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">

                <a class="btn btn-sm border-0 text-nowrap version-button" href="https://go.2sxc.org/docs-versions" target="_blank" title="archive ðŸ”’">
                  v19 ðŸ”’ <i class="bi bi-caret-down-fill fs-6"></i>
                </a>
              </form>

              <ul class="navbar-nav">
                <li class="nav-item nav-link" style="color: red; font-weight: bold;">
                  ðŸ”’ ARCHIVE
                </li>
              </ul>

            
          </div>
        </div>
      </div></nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="JsCode.TurnOn.Specs">

<img src="../../assets/features/turn-on.svg" width="100%">
<h1 id="turnon-javascript-api-specs-wip">turnOn JavaScript API Specs (WIP!)</h1>
<p>The configuration is always a JSON. The simplest possible <strong>turnOn</strong> would be this:</p>
<pre><code class="lang-html">&lt;em turn-on='{ &quot;run&quot;: &quot;window.startSomething()&quot; }'&gt;&lt;/em&gt;
</code></pre>
<p>Longer name segments are automatically checked one by one, so this will also work reliably:</p>
<pre><code class="lang-html">&lt;em turn-on='{ &quot;run&quot;: &quot;window.appGallery.master.start()&quot; }'&gt;&lt;/em&gt;
</code></pre>
<p>Very often you'll then want to include data - either an identifier, a string or object:</p>
<pre><code class="lang-html">&lt;em turn-on='{ &quot;run&quot;: &quot;window.startMeaningOfLife()&quot;, &quot;data&quot;: &quot;42&quot; }'&gt;&lt;/em&gt;

&lt;em turn-on='{ &quot;run&quot;: &quot;window.startMeaningOfLife()&quot;, &quot;data&quot;: { &quot;answer&quot;: &quot;42&quot;, &quot;question&quot;: null }'&gt;&lt;/em&gt;
</code></pre>
<p>In addition you can also specify one or more objects to wait for:</p>
<pre><code class="lang-html">&lt;em turn-on='{ &quot;await&quot;: [&quot;window.$&quot;, &quot;window.fancybox&quot;], &quot;run&quot;: &quot;window.appGallery.master.start()&quot; }'&gt;&lt;/em&gt;
</code></pre>
<p>You can also wait for a ready-check to exist and for it to return true:</p>
<pre><code class="lang-html">&lt;em turn-on='{ &quot;await&quot;: [&quot;window.appGallery.isReady()&quot;], &quot;run&quot;: &quot;window.appGallery.master.start()&quot; }'&gt;&lt;/em&gt;
</code></pre>
<h2 id="turnon-json-schema">turnOn JSON Schema</h2>
<p>These are the properties you can set</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>await</code></td>
<td><code>string[]</code></td>
<td>Strings can be objects on window or functions to call for finding out if it's ready.</td>
</tr>
<tr>
<td><code>run</code> (req.)</td>
<td><code>string</code></td>
<td>The function to call once it exists</td>
</tr>
<tr>
<td><code>data</code></td>
<td><code>any</code></td>
<td>data to give the run-command</td>
</tr>
<tr>
<td><code>debug</code></td>
<td><code>boolean</code></td>
<td>will console-log what it's doing</td>
</tr>
</tbody>
</table>
<h2 id="more-on-the-await-property">More on the <code>await</code> Property</h2>
<p>This is always a string array. As of v0.1 all values...</p>
<ul>
<li>must begin with <code>window</code></li>
<li>can end with just a name like <code>window.something</code> or with <code>()</code> like <code>window.something()</code></li>
<li>can have a much longer name like <code>window.myTopic.mySubtopic.ready</code></li>
<li>if it ends with <code>()</code> then it will be called repeatedly until it returns <code>true</code></li>
<li>experimental: if the node returns a promise object, will wait for that to complete (not fully tested)</li>
</ul>
<h2 id="more-on-the-run-property">More on the <code>run</code> Property</h2>
<ul>
<li>must begin with <code>window</code></li>
<li>can have a short name like <code>window.ready()</code> or a long name like <code>window.myTopic.mySubtopic.ready()</code></li>
<li>must end with <code>()</code></li>
<li>the run can be an isolated function or part of a larger object. It will preserve the <code>this</code> if it's part of a larger object</li>
</ul>
<h2 id="debug-turnon">Debug turnOn</h2>
<p>In some cases you may not get what you expect and need to debug what you're doing. There are two options:</p>
<ul>
<li>To debug a specific turnOn just add the <code>&quot;debug&quot;: true</code> to the JSON</li>
<li>To debug everything in turnOn, set <code>window.debugTurnOn = true;</code> anywhere on the page. <em>this will flood your console</em></li>
</ul>
<h2 id="common-problems">Common Problems</h2>
<p>The most common cause of issues is an invalid JSON. You'll get errors in the console if you do this.
This is especially common if you add dynamic data from the CMS to the object, as it could contain <code>&quot;</code> characters which break the json.</p>
<p>Another common problem is converting boolean C# values to inject into the JSON. Here's why:</p>
<pre><code class="lang-html">&lt;!-- this will fail --&gt;
&lt;span turn-on='{ &quot;run&quot;: &quot;window.load()&quot;, &quot;data&quot;: { &quot;show&quot;: Settings.Show }}'&gt;&lt;/span&gt;

&lt;!-- will produce this --&gt;
&lt;span turn-on='{ &quot;run&quot;: &quot;window.load()&quot;, &quot;data&quot;: { &quot;show&quot;: True }}'&gt;&lt;/span&gt;

&lt;!-- this will work --&gt;
&lt;span turn-on='{ &quot;run&quot;: &quot;window.load()&quot;, &quot;data&quot;: { &quot;show&quot;: @(Settings.Show ? &quot;true&quot; : &quot;false&quot;) }}'&gt;&lt;/span&gt;

&lt;!-- will produce this --&gt;
&lt;span turn-on='{ &quot;run&quot;: &quot;window.load()&quot;, &quot;data&quot;: { &quot;show&quot;: true }}'&gt;&lt;/span&gt;
</code></pre>
<h2 id="allowed-html-tags">Allowed HTML Tags</h2>
<p>Any valid HTML tag can be used, incl. existing <code>div</code> or <code>span</code> tags which just get a <code>turn-on</code> attribute added. So you can use <code>&lt;em&gt;</code>, <code>&lt;div&gt;</code>, <code>&lt;span&gt;</code> or even <code>&lt;turnOn&gt;</code></p>
<p>There are a few cases where problems could arise though:</p>
<ol>
<li>If you use a <code>&lt;script&gt;</code> tag, this may not work as expected, as additional processing layers may do something with these script tags. This is especially important in Oqtane, as there the script tags are filtered out and treated separately.</li>
<li>If you use a tag which you will later modify in HTML (like using jQuery or Angular) this may fail, because <strong>turnOn</strong> will make status-updates to the tag and this could interfere with your code doing updates as well.</li>
</ol>
<hr>
<h2 id="history">History</h2>
<ol>
<li>Introduced on 2sxc 12.02</li>
</ol>
<h2 id="future-features">Future features</h2>
<ol>
<li>Get await-functions to preserve the <code>this</code> scope</li>
<li>also await certain DOM events; ATM you can do this easily after turnOn has run it's magic, but it would be nice to specify it in the config</li>
<li>load scripts and js</li>
</ol>

</article>

        <div class="contribution d-print-none">
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          
          <span>
            Made by <a href="https://www.2sic.com">2sic</a>
            with ðŸ’– and
            <a href="https://dotnet.github.io/docfx">docfx</a>
            â€” 
            for <a href="https://2sxc.org">2sxc</a>,
            <a href="https://dnncommunity.org/">Dnn</a> 
            and <a href="https://www.oqtane.org/">Oqtane</a>
            â€” 
            see also <a href="">2sxc Github</a> and <a href="https://blazor-cms.org">Blazor CMS</a>
          </span>
        </div>
      </div>
    </footer>
  </body>
</html>